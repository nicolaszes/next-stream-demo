(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[559],{25:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultErrorCapturePlugin=t.ErrorCapturePlugin=void 0;let r=n(5942),a=n(957),i=n(7775);class l{initialize(e){(0,i.initializePlugin)(this,e,"错误捕获功能"),this.enabled}constructor(e=!0){this.type="errorCapture",this.name="ErrorCapturePlugin",this.enabled=e}}t.ErrorCapturePlugin=l;class s extends l{onError(e,t,n){}renderFallback(e,t,n){return(0,r.jsxs)("div",{className:"p-4 bg-red-100 border border-red-400 text-red-700 rounded",children:[(0,r.jsxs)("strong",{className:"font-bold",children:["Error in ",n||"Component",":"]}),(0,r.jsxs)("span",{className:"block sm:inline",children:[" ",e.message]}),!1]})}constructor(){super(...arguments),this.type=a.ERROR_CAPTURE_PLUGIN_TYPE,this.name="DefaultErrorCapture"}}t.DefaultErrorCapturePlugin=s},403:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTrackingUtils=function(e,t){return{track:n=>{e.getPluginsByType("tracking").forEach(e=>e.track(n,t))}}}},552:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultTrackingPlugin=t.TrackingPlugin=void 0;let r=n(6228),a=n(7775);class i{initialize(e){(0,a.initializePlugin)(this,e,"用户行为追踪功能"),this.enabled}track(e,t){this.enabled&&new Date().toISOString()}constructor(e=!0){this.type=r.TRACKING_PLUGIN_TYPE,this.name="TrackingPlugin",this.enabled=e}}t.TrackingPlugin=i,t.DefaultTrackingPlugin=i},894:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLazyLoadUtils=function(e){return{createLazyComponent:(t,n)=>{let a=e.getPlugin("lazy-load");return a?a.createLazyComponent(t,n):"function"==typeof t?r.default.createElement("div",{},"懒加载插件未启用"):t},createLazyImage:(t,n,a)=>{let i=e.getPlugin("lazy-load");return i?i.createLazyImage(t,n,a):r.default.createElement("img",{src:t,alt:n,className:null==a?void 0:a.className})}}};let r=function(e){return e&&e.__esModule?e:{default:e}}(n(4166))},957:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_CAPTURE_PLUGIN_TYPE=void 0,t.ERROR_CAPTURE_PLUGIN_TYPE="errorCapture"},1013:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPluginUtils=function(e){return{enablePlugin:(t,n)=>e.enablePlugin(t,n),disablePlugin:(t,n)=>e.disablePlugin(t,n),togglePlugin:(t,n)=>e.togglePlugin(t,n),isPluginEnabled:(t,n)=>e.isPluginEnabled(t,n)}}},1403:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var r=n(5942),a=n(4166),i=n(5703),l=n.n(i);function s(e){let{articleId:t}=e,[n,s]=(0,a.useState)(null),[u,o]=(0,a.useState)(!0),[c,d]=(0,a.useState)(null);return((0,a.useEffect)(()=>{let e=!0;return(async()=>{try{await new Promise(e=>setTimeout(e,400));let t=await fetch("/api/article/content");if(!t.ok)throw Error("Failed to fetch content");let n=await t.json();if(e)if(n.success)s(n.data);else throw Error(n.message||"加载失败")}catch(t){e&&d(t instanceof Error?t.message:"加载失败")}finally{e&&o(!1)}})(),()=>{e=!1}},[t]),u)?(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,r.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),(0,r.jsx)("div",{className:"h-32 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})}):c?(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"text-red-500 mb-2",children:"⚠️ 内容加载失败"}),(0,r.jsx)("div",{className:"text-gray-500 text-sm",children:c}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"重新加载"})]})}):n?(0,r.jsx)(l(),{plugins:[new i.DefaultErrorCapturePlugin(!0),new i.DefaultLazyLoadPlugin(!0)],componentName:"ArticleContent",fallback:(0,r.jsx)("div",{className:"text-center py-4",children:"加载中..."}),children:e=>(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,r.jsxs)("div",{className:"prose prose-gray max-w-none",children:[(0,r.jsx)("div",{className:"text-gray-800 leading-relaxed whitespace-pre-line text-base",children:n.content}),n.images&&n.images.length>0&&(0,r.jsx)("div",{className:"mt-6 space-y-4",children:n.images.map((t,n)=>(0,r.jsx)("div",{className:"my-6",children:e.createLazyImage(t,"文章图片 ".concat(n+1),{className:"w-full rounded-lg shadow-sm object-cover",style:{maxHeight:"400px"}})},n))})]})})}):(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:"暂无内容"})})}},1446:(e,t,n)=>{"use strict";n.d(t,{default:()=>u});var r=n(5942),a=n(9481),i=n(5190),l=n(7345);let s=(0,a.default)(()=>n.e(439).then(n.bind(n,8439)),{loadableGenerated:{webpack:()=>[8439]},ssr:!1,loading:()=>(0,r.jsx)(l.A,{type:"article-actions"})});function u(){return(0,r.jsx)(i.default,{componentName:"Article-Content-Priority",fallback:(0,r.jsx)(l.A,{type:"articles-related"}),children:(0,r.jsx)(s,{})})}},1485:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useErrorHandler=function(e,t){return(0,a.useMemo)(()=>({renderErrorFallback:(n,a)=>{if(!n||!a)return null;let i=e.getPlugin("error-capture");return(null==i?void 0:i.renderFallback)?i.renderFallback(n,a,t):(0,r.jsxs)("div",{children:["Something went wrong in ",t,"."]})},handleError:(n,r)=>{e.getPluginsByType("error-capture").forEach(e=>e.onError(n,r,t))}}),[e,t])};let r=n(5942),a=n(4166)},1712:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useLazyLoad=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{rootMargin:t="50px",threshold:n=.1,triggerOnce:a=!0,onLoad:i,onError:l}=e,[s,u]=(0,r.useState)(!1),[o,c]=(0,r.useState)(!1),[d,g]=(0,r.useState)(!1),[f,m]=(0,r.useState)(null),p=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=p.current;if(!e)return;let r=new IntersectionObserver(t=>{let[n]=t;n.isIntersecting?(u(!0),a&&r.unobserve(e)):a||u(!1)},{rootMargin:t,threshold:n});return r.observe(e),()=>{r.unobserve(e)}},[t,n,a]);let P=(0,r.useCallback)(()=>{c(!0),g(!1),m(null),null==i||i()},[i]);return{elementRef:p,isIntersecting:s,isLoaded:o,hasError:d,error:f,handleLoad:P,handleError:(0,r.useCallback)(e=>{g(!0),m(e),null==l||l(e)},[l]),reset:(0,r.useCallback)(()=>{u(!1),c(!1),g(!1),m(null)},[])}};let r=n(4166)},2037:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PluginManager=t.BaseContainer=void 0;var r=n(6217);Object.defineProperty(t,"BaseContainer",{enumerable:!0,get:function(){return r.BaseContainer}});var a=n(7783);Object.defineProperty(t,"PluginManager",{enumerable:!0,get:function(){return a.PluginManager}})},2214:(e,t,n)=>{"use strict";n.d(t,{default:()=>a});var r=n(4166);function a(){let[e,t]=(0,r.useState)(!1),[n,a]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=document.querySelector('[data-article-info="true"]');if(e&&e.textContent)try{let t=JSON.parse(e.textContent);a(t)}catch(e){}},[]);let i=(0,r.useCallback)(async()=>{let r=document.querySelector('[data-follow-button="true"]');if(r&&n)try{e?(t(!1),r.textContent="关注",r.className="px-4 py-1.5 text-sm text-blue-600 border border-blue-600 rounded-full hover:bg-blue-50 transition-colors"):(t(!0),r.textContent="已关注",r.className="px-4 py-1.5 text-sm text-white bg-blue-600 border border-blue-600 rounded-full hover:bg-blue-700 transition-colors")}catch(e){}},[e,n]);return(0,r.useEffect)(()=>{let e=document.querySelector('[data-follow-button="true"]');if(e)return e.addEventListener("click",i),()=>{e.removeEventListener("click",i)}},[]),(0,r.useEffect)(()=>{let e=document.querySelector('[data-follow-button="true"]');if(e)return e.removeEventListener("click",i),e.addEventListener("click",i),()=>{e.removeEventListener("click",i)}},[i]),null}},2465:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTracking=t.TRACKING_PLUGIN_TYPE=t.DefaultTrackingPlugin=void 0;var r=n(552);Object.defineProperty(t,"DefaultTrackingPlugin",{enumerable:!0,get:function(){return r.DefaultTrackingPlugin}});var a=n(6228);Object.defineProperty(t,"TRACKING_PLUGIN_TYPE",{enumerable:!0,get:function(){return a.TRACKING_PLUGIN_TYPE}});var i=n(3868);Object.defineProperty(t,"useTracking",{enumerable:!0,get:function(){return i.useTracking}})},2663:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,6912,23)),Promise.resolve().then(n.bind(n,1403)),Promise.resolve().then(n.bind(n,2214)),Promise.resolve().then(n.bind(n,4287)),Promise.resolve().then(n.bind(n,1446)),Promise.resolve().then(n.bind(n,6290)),Promise.resolve().then(n.bind(n,5190))},2914:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LazyImage=function(e){let{src:t,alt:n="",options:i={}}=e,{placeholder:l,fallback:s,className:u}=i,{elementRef:o,isIntersecting:c,hasError:d,error:g,handleLoad:f,handleError:m}=(0,a.useLazyLoad)(i);return d?(0,r.jsx)("div",{ref:o,className:u,children:s||(0,r.jsxs)("div",{className:"bg-gray-300 flex items-center justify-center h-32 text-gray-600",children:["图片加载失败: ",null==g?void 0:g.message]})}):c?(0,r.jsx)("div",{ref:o,className:u,children:(0,r.jsx)("img",{src:t,alt:n,onLoad:()=>{f()},onError:()=>{m(Error("Failed to load image: ".concat(t)))},className:"w-full h-auto"})}):(0,r.jsx)("div",{ref:o,className:u,children:l||(0,r.jsx)("div",{className:"animate-pulse bg-gray-200 h-32 w-full flex items-center justify-center",children:"加载中..."})})};let r=n(5942),a=n(1712)},3327:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useContainerUtils=function(e,t){return(0,r.useMemo)(()=>({...(0,a.createTrackingUtils)(e,t),...(0,i.createMonitoringUtils)(e,t),...(0,l.createLazyLoadUtils)(e),...(0,s.createPluginUtils)(e)}),[e,t])};let r=n(4166),a=n(403),i=n(5921),l=n(894),s=n(1013)},3547:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MONITORING_PLUGIN_TYPE=void 0,t.MONITORING_PLUGIN_TYPE="monitoring"},3851:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PLUGIN_PRIORITIES=t.DEFAULT_PLUGINS=void 0;let r=n(5252),a=n(2465),i=n(5446),l=n(4334);t.DEFAULT_PLUGINS=[new r.DefaultErrorCapturePlugin(!1),new a.DefaultTrackingPlugin(!1),new i.DefaultMonitoringPlugin(!1),new l.DefaultLazyLoadPlugin(!1)],t.PLUGIN_PRIORITIES={ERROR_CAPTURE:1,TRACKING:2,MONITORING:3,LAZY_LOAD:4}},3868:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTracking=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{componentName:t,autoTrack:n=!0}=e,a=(0,r.useRef)(new Set),i=(0,r.useCallback)(e=>{({...e,timestamp:Date.now()})},[t]),l=(0,r.useCallback)((e,t)=>{i({eventName:"click",properties:{element:e,...t}})},[i]),s=(0,r.useCallback)((e,t)=>{let r="view_".concat(e);n&&a.current.has(r)||(a.current.add(r),i({eventName:"view",properties:{view:e,...t}}))},[i,n]),u=(0,r.useCallback)((e,t)=>{i({eventName:e,properties:t})},[i]);return{track:i,trackClick:l,trackView:s,trackCustom:u}};let r=n(4166)},4040:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.usePluginManager=t.useErrorHandler=t.useContainerUtils=void 0;var r=n(3327);Object.defineProperty(t,"useContainerUtils",{enumerable:!0,get:function(){return r.useContainerUtils}});var a=n(1485);Object.defineProperty(t,"useErrorHandler",{enumerable:!0,get:function(){return a.useErrorHandler}});var i=n(6643);Object.defineProperty(t,"usePluginManager",{enumerable:!0,get:function(){return i.usePluginManager}})},4287:(e,t,n)=>{"use strict";n.d(t,{default:()=>u});var r=n(5942),a=n(9481),i=n(5190),l=n(7345);let s=(0,a.default)(()=>n.e(676).then(n.bind(n,3676)),{loadableGenerated:{webpack:()=>[3676]},ssr:!1,loading:()=>(0,r.jsx)(l.A,{type:"article-actions"})});function u(){return(0,r.jsx)(i.default,{componentName:"Article-Content-Priority",fallback:(0,r.jsx)(l.A,{type:"article-actions"}),children:(0,r.jsx)(s,{})})}},4334:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useLazyLoad=t.LazyImage=t.LazyComponent=t.LAZY_LOAD_PLUGIN_TYPE=t.DefaultLazyLoadPlugin=void 0;var r=n(8323);Object.defineProperty(t,"DefaultLazyLoadPlugin",{enumerable:!0,get:function(){return r.DefaultLazyLoadPlugin}});var a=n(6755);Object.defineProperty(t,"LAZY_LOAD_PLUGIN_TYPE",{enumerable:!0,get:function(){return a.LAZY_LOAD_PLUGIN_TYPE}});var i=n(9348);Object.defineProperty(t,"LazyComponent",{enumerable:!0,get:function(){return i.LazyComponent}});var l=n(2914);Object.defineProperty(t,"LazyImage",{enumerable:!0,get:function(){return l.LazyImage}});var s=n(1712);Object.defineProperty(t,"useLazyLoad",{enumerable:!0,get:function(){return s.useLazyLoad}})},4791:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateComponentName=function(e){return"string"==typeof e&&e.length>0},t.createComponentId=function(e){return"container-".concat(e,"-").concat(Date.now())},t.formatErrorMessage=function(e,t){return"[".concat(t,"] ").concat(e.message)}},5025:(e,t,n)=>{"use strict";var r=Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)}(n(3851),t)},5190:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var r=n(5942),a=n(4166),i=n(5703),l=n.n(i);function s(e){let{children:t,componentName:n,fallback:s,enablePluginsOnClient:u=!0}=e,{hydrationState:o,plugins:c,containerRef:d}=function(e){let[t,n]=(0,a.useState)("ssr"),[r,l]=(0,a.useState)([]),s=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if(n("hydrating"),e){let e=()=>{l([new i.DefaultErrorCapturePlugin(!0),new i.DefaultLazyLoadPlugin(!0)]),n("enhanced")};if("requestIdleCallback"in window){let t=requestIdleCallback(e,{timeout:1e3});return()=>cancelIdleCallback(t)}{let t=setTimeout(e,100);return()=>clearTimeout(t)}}n("enhanced")},[e]),{hydrationState:t,plugins:r,containerRef:s}}(u);return(0,r.jsx)("div",{ref:d,"data-hydration-state":o,children:(0,r.jsx)(l(),{plugins:c,fallback:s,componentName:n,children:t})})}},5252:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_CAPTURE_PLUGIN_TYPE=t.DefaultErrorCapturePlugin=void 0;var r=n(25);Object.defineProperty(t,"DefaultErrorCapturePlugin",{enumerable:!0,get:function(){return r.DefaultErrorCapturePlugin}});var a=n(957);Object.defineProperty(t,"ERROR_CAPTURE_PLUGIN_TYPE",{enumerable:!0,get:function(){return a.ERROR_CAPTURE_PLUGIN_TYPE}})},5302:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StandardContainer=void 0;let r=n(5942),a=n(4166),i=n(6217),l=n(5025),s=n(1013),u=n(403),o=n(5921),c=n(894);class d extends i.BaseContainer{componentDidCatch(e,t){this.setState({error:e,errorInfo:t});let n=this.pluginManager.getPlugin("error-capture");n&&"onError"in n&&n.onError(e,t,this.componentName)}getDefaultPlugins(){return[...l.DEFAULT_PLUGINS]}getUtils(){let e=(0,s.createPluginUtils)(this.pluginManager),t=(0,u.createTrackingUtils)(this.pluginManager,this.componentName),n=(0,o.createMonitoringUtils)(this.pluginManager,this.componentName),r=(0,c.createLazyLoadUtils)(this.pluginManager);return{...e,...t,...n,...r}}renderErrorFallback(e,t){let n=this.pluginManager.getPlugin("error-capture");return n&&"renderFallback"in n&&n.renderFallback?n.renderFallback(e,t,this.componentName):(0,r.jsx)("div",{children:"Something went wrong."})}render(){let{children:e,isLoading:t,fallback:n,errorCapture:i}=this.props,{hasError:l}=this.state||{},s=this.getUtils();return l?i||this.renderErrorFallback(this.state.error,this.state.errorInfo):t?(0,r.jsx)("div",{children:"Loading..."}):(0,r.jsx)(a.Suspense,{fallback:n||(0,r.jsx)("div",{children:"Loading component..."}),children:"function"==typeof e?e(s):e})}constructor(e){super(e,[...e.plugins||l.DEFAULT_PLUGINS])}}t.StandardContainer=d},5446:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useMonitoring=t.MONITORING_PLUGIN_TYPE=t.DefaultMonitoringPlugin=void 0;var r=n(8651);Object.defineProperty(t,"DefaultMonitoringPlugin",{enumerable:!0,get:function(){return r.DefaultMonitoringPlugin}});var a=n(3547);Object.defineProperty(t,"MONITORING_PLUGIN_TYPE",{enumerable:!0,get:function(){return a.MONITORING_PLUGIN_TYPE}});var i=n(8880);Object.defineProperty(t,"useMonitoring",{enumerable:!0,get:function(){return i.useMonitoring}})},5703:(e,t,n)=>{"use strict";var r=Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]},a=function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.PluginManager=t.BaseContainer=t.default=void 0;var i=n(5302);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.StandardContainer}});var l=n(2037);Object.defineProperty(t,"BaseContainer",{enumerable:!0,get:function(){return l.BaseContainer}}),Object.defineProperty(t,"PluginManager",{enumerable:!0,get:function(){return l.PluginManager}}),a(n(8740),t),a(n(7297),t),a(n(4040),t),a(n(5025),t)},5921:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMonitoringUtils=function(e,t){return{record:n=>{e.getPluginsByType("monitoring").forEach(e=>e.record(n,t))}}}},6217:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseContainer=void 0;let r=n(4166),a=n(7783);class i extends r.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidUpdate(e){JSON.stringify(e.plugins)!==JSON.stringify(this.props.plugins)&&this.reinitializePlugins()}initializePlugins(e,t){let n=[...t];e.plugins&&e.plugins.forEach(e=>{let t=n.findIndex(t=>t.type===e.type&&t.name===e.name);-1!==t?n[t]=e:n.push(e)}),this.pluginManager=new a.PluginManager(n),this.pluginManager.initializePlugins(this.componentName)}reinitializePlugins(){this.initializePlugins(this.props,this.getDefaultPlugins())}constructor(e,t=[]){super(e),this.enablePlugin=(e,t)=>this.pluginManager.enablePlugin(e,t),this.disablePlugin=(e,t)=>this.pluginManager.disablePlugin(e,t),this.togglePlugin=(e,t)=>this.pluginManager.togglePlugin(e,t),this.isPluginEnabled=(e,t)=>this.pluginManager.isPluginEnabled(e,t),this.componentName=e.componentName||"UnnamedComponent",this.pluginManager=new a.PluginManager([]),this.initializePlugins(e,t)}}t.BaseContainer=i},6228:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TRACKING_PLUGIN_TYPE=void 0,t.TRACKING_PLUGIN_TYPE="tracking"},6290:(e,t,n)=>{"use strict";n.d(t,{default:()=>a});var r=n(4166);function a(){return(0,r.useEffect)(()=>{let e=()=>{window.history.back()},t=()=>{},n=document.querySelector('[data-nav-back="true"]'),r=document.querySelector('[data-nav-share="true"]');return n&&n.addEventListener("click",e),r&&r.addEventListener("click",t),()=>{n&&n.removeEventListener("click",e),r&&r.removeEventListener("click",t)}},[]),null}},6643:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.usePluginManager=function(e,t){return(0,r.useMemo)(()=>{let n=new a.PluginManager(e);return n.initializePlugins(t),n},[e,t])};let r=n(4166),a=n(7783)},6755:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LAZY_LOAD_PLUGIN_TYPE=void 0,t.LAZY_LOAD_PLUGIN_TYPE="lazyload"},7297:(e,t,n)=>{"use strict";var r=Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]},a=function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createLazyLoadUtils=t.createMonitoringUtils=t.createTrackingUtils=void 0,a(n(4791),t),a(n(1013),t);var i=n(403);Object.defineProperty(t,"createTrackingUtils",{enumerable:!0,get:function(){return i.createTrackingUtils}});var l=n(5921);Object.defineProperty(t,"createMonitoringUtils",{enumerable:!0,get:function(){return l.createMonitoringUtils}});var s=n(894);Object.defineProperty(t,"createLazyLoadUtils",{enumerable:!0,get:function(){return s.createLazyLoadUtils}})},7345:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(5942);function a(e){let{type:t}=e;return"article-header"===t?(0,r.jsxs)("div",{className:"px-4 py-6",children:[(0,r.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,r.jsx)("div",{className:"h-6 bg-gray-200 rounded animate-pulse"}),(0,r.jsx)("div",{className:"h-6 bg-gray-200 rounded animate-pulse w-3/4"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full animate-pulse"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-20"}),(0,r.jsx)("div",{className:"h-3 bg-gray-200 rounded animate-pulse w-32"})]})]}),(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded-full animate-pulse w-16"})]})]}):"article-content"===t?(0,r.jsx)("div",{className:"px-4 pb-6",children:(0,r.jsxs)("div",{className:"space-y-4",children:[Array.from({length:6}).map((e,t)=>(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-5/6"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-4/6"})]},t)),(0,r.jsx)("div",{className:"h-48 bg-gray-200 rounded-lg animate-pulse my-6"})]})}):"articles-related"===t?(0,r.jsxs)("div",{className:"px-4 py-6",children:[(0,r.jsx)("div",{className:"h-6 bg-gray-200 rounded animate-pulse w-24 mb-4"}),(0,r.jsx)("div",{className:"space-y-4",children:Array.from({length:3}).map((e,t)=>(0,r.jsxs)("div",{className:"flex space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4"}),(0,r.jsx)("div",{className:"h-3 bg-gray-200 rounded animate-pulse w-1/2"})]}),(0,r.jsx)("div",{className:"w-30 h-20 bg-gray-200 rounded-lg animate-pulse flex-shrink-0"})]},t))})]}):"banner"===t?(0,r.jsx)("div",{className:"flex space-x-4 overflow-hidden",children:[1,2].map(e=>(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-80 h-36 bg-gray-200 rounded-lg animate-pulse"})},e))}):"category"===t?(0,r.jsx)("div",{className:"bg-white rounded-lg p-4",children:(0,r.jsx)("div",{className:"grid grid-cols-4 gap-4",children:Array.from({length:8}).map((e,t)=>(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-full animate-pulse"}),(0,r.jsx)("div",{className:"w-8 h-3 bg-gray-200 rounded animate-pulse"})]},t))})}):"recommendation"===t?(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,r.jsx)("div",{className:"w-24 h-6 bg-gray-200 rounded animate-pulse mb-4"}),(0,r.jsx)("div",{className:"space-y-4",children:Array.from({length:3}).map((e,t)=>(0,r.jsxs)("div",{className:"flex space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-lg animate-pulse flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,r.jsx)("div",{className:"w-3/4 h-4 bg-gray-200 rounded animate-pulse"}),(0,r.jsx)("div",{className:"w-full h-3 bg-gray-200 rounded animate-pulse"}),(0,r.jsx)("div",{className:"w-1/4 h-5 bg-gray-200 rounded animate-pulse"})]})]},t))})]}):null}},7775:(e,t)=>{"use strict";function n(e,t,n){new Date().toISOString(),e.enabled}Object.defineProperty(t,"__esModule",{value:!0}),t.initializePlugin=n,t.initializePlugins=function(e,t){e.forEach(e=>{e.enabled&&(n(e,t),e.initialize(t))})}},7783:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PluginManager=void 0;class n{getPlugin(e){return this.plugins.find(t=>t.type===e&&!1!==t.enabled)}getPluginsByType(e){return this.plugins.filter(t=>t.type===e&&!1!==t.enabled)}enablePlugin(e,t){let n=this.findPlugin(e,t);return!!n&&(n.enabled=!0,!0)}disablePlugin(e,t){let n=this.findPlugin(e,t);return!!n&&(n.enabled=!1,!0)}togglePlugin(e,t){let n=this.findPlugin(e,t);return!!n&&(n.enabled=!n.enabled,n.enabled)}isPluginEnabled(e,t){let n=this.findPlugin(e,t);return!!n&&!1!==n.enabled}findPlugin(e,t){return this.plugins.find(n=>n.type===e&&(!t||n.name===t))}addPlugin(e){if(!this.plugins.find(t=>t.type===e.type&&t.name===e.name)){var t;this.plugins.push({...e,enabled:null==(t=e.enabled)||t})}}removePlugin(e,t){this.plugins=this.plugins.filter(n=>n.type!==e||t&&n.name!==t)}getAllPlugins(){return[...this.plugins]}initializePlugins(e){this.plugins.filter(e=>!1!==e.enabled).forEach(t=>{t.initialize&&"function"==typeof t.initialize&&(null==t||t.initialize(e))})}constructor(e=[]){this.plugins=e.map(e=>{var t;return Object.assign(e,{enabled:null==(t=e.enabled)||t}),e})}}t.PluginManager=n},8323:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultLazyLoadPlugin=t.LazyLoadPlugin=void 0;let r=function(e){return e&&e.__esModule?e:{default:e}}(n(4166)),a=n(6755),i=n(9348),l=n(2914),s=n(7775);class u{initialize(e){(0,s.initializePlugin)(this,e,"懒加载功能"),this.enabled}constructor(e=!0){this.type="lazyload",this.name="LazyloadPlugin",this.enabled=e}}t.LazyLoadPlugin=u;class o extends u{createLazyComponent(e,t){return r.default.createElement(i.LazyComponent,{component:e,options:t})}createLazyImage(e,t,n){return r.default.createElement(l.LazyImage,{src:e,alt:t,options:n})}constructor(){super(...arguments),this.type=a.LAZY_LOAD_PLUGIN_TYPE,this.name="DefaultLazyLoad"}}t.DefaultLazyLoadPlugin=o},8651:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultMonitoringPlugin=t.MonitoringPlugin=void 0;let r=n(3547),a=n(7775);class i{initialize(e){(0,a.initializePlugin)(this,e,"性能监控功能"),this.enabled}constructor(e=!0){this.type="monitoring",this.name="MonitoringPlugin",this.enabled=e}}t.MonitoringPlugin=i;class l extends i{record(e,t){t?"".concat(t,".").concat(e.metricName):e.metricName}constructor(){super(...arguments),this.enabled=!0,this.type=r.MONITORING_PLUGIN_TYPE,this.name="DefaultMonitoring"}}t.DefaultMonitoringPlugin=l},8740:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useLazyLoad=t.LazyImage=t.LazyComponent=t.LAZY_LOAD_PLUGIN_TYPE=t.DefaultLazyLoadPlugin=t.MONITORING_PLUGIN_TYPE=t.DefaultMonitoringPlugin=t.TRACKING_PLUGIN_TYPE=t.DefaultTrackingPlugin=t.ERROR_CAPTURE_PLUGIN_TYPE=t.DefaultErrorCapturePlugin=void 0;var r=n(5252);Object.defineProperty(t,"DefaultErrorCapturePlugin",{enumerable:!0,get:function(){return r.DefaultErrorCapturePlugin}});var a=n(957);Object.defineProperty(t,"ERROR_CAPTURE_PLUGIN_TYPE",{enumerable:!0,get:function(){return a.ERROR_CAPTURE_PLUGIN_TYPE}});var i=n(2465);Object.defineProperty(t,"DefaultTrackingPlugin",{enumerable:!0,get:function(){return i.DefaultTrackingPlugin}});var l=n(2465);Object.defineProperty(t,"TRACKING_PLUGIN_TYPE",{enumerable:!0,get:function(){return l.TRACKING_PLUGIN_TYPE}});var s=n(5446);Object.defineProperty(t,"DefaultMonitoringPlugin",{enumerable:!0,get:function(){return s.DefaultMonitoringPlugin}});var u=n(5446);Object.defineProperty(t,"MONITORING_PLUGIN_TYPE",{enumerable:!0,get:function(){return u.MONITORING_PLUGIN_TYPE}});var o=n(4334);Object.defineProperty(t,"DefaultLazyLoadPlugin",{enumerable:!0,get:function(){return o.DefaultLazyLoadPlugin}});var c=n(4334);Object.defineProperty(t,"LAZY_LOAD_PLUGIN_TYPE",{enumerable:!0,get:function(){return c.LAZY_LOAD_PLUGIN_TYPE}});var d=n(4334);Object.defineProperty(t,"LazyComponent",{enumerable:!0,get:function(){return d.LazyComponent}}),Object.defineProperty(t,"LazyImage",{enumerable:!0,get:function(){return d.LazyImage}}),Object.defineProperty(t,"useLazyLoad",{enumerable:!0,get:function(){return d.useLazyLoad}})},8880:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useMonitoring=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{componentName:t,autoCollect:n=!0,collectInterval:a=3e4}=e,i=(0,r.useRef)(new Map),l=(0,r.useRef)(null),s=(0,r.useCallback)(e=>{({...e,timestamp:Date.now()})},[t]),u=(0,r.useCallback)((e,t,n)=>{let r=performance.now()-t;s({metricName:"".concat(e,".duration"),value:r,tags:n})},[s]),o=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;s({metricName:"".concat(e,".count"),value:t,tags:n})},[s]),c=(0,r.useCallback)((e,t,n)=>{s({metricName:"".concat(e,".gauge"),value:t,tags:n})},[s]),d=(0,r.useCallback)(e=>{let t=performance.now();return i.current.set(e,t),()=>{let t=i.current.get(e);void 0!==t&&(u(e,t),i.current.delete(e))}},[u]);return(0,r.useEffect)(()=>{if(!n)return;let e=()=>{if("memory"in performance){let e=performance.memory;c("memory.used",e.usedJSHeapSize,{unit:"bytes"}),c("memory.total",e.totalJSHeapSize,{unit:"bytes"})}let e=performance.getEntriesByType("navigation")[0];e&&(c("page.load_time",e.loadEventEnd-e.loadEventStart,{unit:"ms"}),c("page.dom_ready",e.domContentLoadedEventEnd-e.domContentLoadedEventStart,{unit:"ms"}))};return e(),l.current=setInterval(e,a),()=>{l.current&&clearInterval(l.current)}},[n,a,c]),{record:s,recordPerformance:u,recordCounter:o,recordGauge:c,startTimer:d}};let r=n(4166)},9348:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LazyComponent=function(e){let{component:t,options:n={}}=e,{placeholder:l,fallback:s}=n,{elementRef:u,isIntersecting:o,isLoaded:c,hasError:d,error:g,handleLoad:f,handleError:m}=(0,i.useLazyLoad)(n),[p,P]=(0,a.useState)(null),[b,y]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{!o||c||b||d||(y(!0),"function"==typeof t?t().then(e=>{P(e),f()}).catch(e=>{m(e instanceof Error?e:Error("Component load failed"))}).finally(()=>{y(!1)}):(P(t),f(),y(!1)))},[o,c,b,d,t,f,m]),d)?(0,r.jsx)("div",{ref:u,children:s||(0,r.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:["组件加载失败: ",null==g?void 0:g.message]})}):!o||b?(0,r.jsx)("div",{ref:u,children:l||(0,r.jsx)("div",{className:"animate-pulse bg-gray-200 h-32 w-full flex items-center justify-center",children:b?"加载中...":"等待加载..."})}):(0,r.jsx)("div",{ref:u,children:p})};let r=n(5942),a=n(4166),i=n(1712)}},e=>{var t=t=>e(e.s=t);e.O(0,[120,449,681,358],()=>t(2663)),_N_E=e.O()}]);